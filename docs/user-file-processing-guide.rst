User File Processing Guide
===========================

This guide explains how to use the Rift system to process your files. As a user, you'll learn where to place files for processing, how to add dye files, and where to find your processed results.

Overview
--------

The Rift system processes three types of files:

1. **Input Files** - Files you want the system to process
2. **Dye Files** - Signature files (`.dye` extension) that help the system identify specific patterns
3. **Output Files** - Results from the system that you can retrieve

The system automatically processes files placed in specific directories and makes the results available for download.

Processing Input Files
----------------------

What are Input Files?
~~~~~~~~~~~~~~~~~~~~~

Input files are any files you want the Rift system to analyze or process. These can be documents, data files, logs, or any other file type - the system accepts all file formats.

Where to Place Input Files
~~~~~~~~~~~~~~~~~~~~~~~~~~~

To have your files processed, place them in the input staging directory:

**Input Directory**: ``/var/abyss/input``

Simply copy or move your files to this location. The system will automatically discover and process them.

.. code-block:: bash

   # Example: Copy files to input directory
   cp my-document.pdf /var/abyss/input/
   cp data-file.csv /var/abyss/input/
   cp log-file.txt /var/abyss/input/

How Input Processing Works
~~~~~~~~~~~~~~~~~~~~~~~~~~

1. **File Placement**: You place files in ``/var/abyss/input``
2. **Automatic Discovery**: The system checks for new files every 5 minutes
3. **Processing**: Files are safely copied to the processing system
4. **Archive**: Your original files are moved to ``/var/abyss/input/processed`` to prevent reprocessing
5. **Cleanup**: Processed files are automatically deleted after 24 hours to save space

.. note::
   **File Retention**: Files in the processed directory are automatically deleted after 24 hours. If you need to keep copies of your original files, make sure to back them up before placing them in the input directory.

Manual Processing
~~~~~~~~~~~~~~~~~

If you need immediate processing instead of waiting for the automatic 5-minute cycle, you can trigger processing manually:

.. code-block:: bash

   # Process files immediately
   ./rift input-add

   # Process with detailed output
   ./rift input-add --verbose

Processing Dye Files
--------------------

What are Dye Files?
~~~~~~~~~~~~~~~~~~~

Dye files are special signature files with a ``.dye`` extension that contain patterns or rules the system uses to identify specific content. These files help the system recognize particular types of data, malware signatures, or other patterns you want to detect.

Where to Place Dye Files
~~~~~~~~~~~~~~~~~~~~~~~~~

To add new dye signatures to the system, place your ``.dye`` files in:

**Dye Directory**: ``/var/abyss/dye``

.. code-block:: bash

   # Example: Add dye files
   cp malware-signature.dye /var/abyss/dye/
   cp content-pattern.dye /var/abyss/dye/
   cp custom-rule.dye /var/abyss/dye/

How Dye Processing Works
~~~~~~~~~~~~~~~~~~~~~~~~

1. **File Placement**: You place ``.dye`` files in ``/var/abyss/dye``
2. **Automatic Discovery**: The system checks for new dye files every 5 minutes
3. **Deployment**: Dye files are copied to the system's signature directories
4. **Activation**: The signatures become active immediately after deployment
5. **Cleanup**: Source dye files are removed after successful deployment

.. warning::
   **File Removal**: Unlike input files, dye files are permanently deleted from the source directory after successful deployment. Make sure you have backups if you need to keep copies.

Manual Dye Processing
~~~~~~~~~~~~~~~~~~~~~

For immediate dye file deployment:

.. code-block:: bash

   # Deploy dye files immediately
   ./rift dye-add

   # Deploy with detailed output
   ./rift dye-add --verbose

Managing Dye Files
~~~~~~~~~~~~~~~~~~

You can also manage existing dye files in the system:

.. code-block:: bash

   # List all active dye files
   ./rift dye-remove --list

   # Remove a specific dye file
   ./rift dye-remove malware-signature.dye

   # Remove all dye files (with confirmation)
   ./rift dye-remove --all

Retrieving Output Files
-----------------------

What are Output Files?
~~~~~~~~~~~~~~~~~~~~~~

Output files are the results of the system's processing. These could be analysis reports, processed data, detection results, or any other files generated by the system based on your input files and active dye signatures.

Where to Find Output Files
~~~~~~~~~~~~~~~~~~~~~~~~~~~

Processed results are available in the output directory:

**Output Directory**: ``/var/abyss/output``

Check this directory regularly for your processed results:

.. code-block:: bash

   # List available output files
   ls -la /var/abyss/output/

   # Copy results to your working directory
   cp /var/abyss/output/* ./my-results/

How Output Processing Works
~~~~~~~~~~~~~~~~~~~~~~~~~~~

1. **Generation**: The system generates output files based on your inputs and active signatures
2. **Availability**: Results are automatically placed in ``/var/abyss/output`` every 5 minutes
3. **Access**: You can download or copy files from this directory
4. **Expiration**: Output files are automatically deleted after 24 hours

.. warning::
   **File Expiration**: Output files are automatically deleted after 24 hours to manage disk space. Download your results promptly or they will be permanently lost.

File Processing Workflow
------------------------

Here's a typical workflow for using the Rift system:

1. **Prepare Your Files**
   
   Organize the files you want to process and any dye signatures you need.

2. **Upload Input Files**
   
   .. code-block:: bash
   
      # Copy your files to the input directory
      cp my-files/* /var/abyss/input/

3. **Add Dye Signatures (if needed)**
   
   .. code-block:: bash
   
      # Add any custom signatures
      cp my-signatures/*.dye /var/abyss/dye/

4. **Wait for Processing**
   
   The system automatically processes files every 5 minutes. You can also trigger immediate processing:
   
   .. code-block:: bash
   
      # Process immediately (optional)
      ./rift input-add
      ./rift dye-add

5. **Check for Results**
   
   .. code-block:: bash
   
      # Check output directory
      ls -la /var/abyss/output/
      
      # Download results
      cp /var/abyss/output/* ./results/

6. **Clean Up**
   
   Remove any temporary files and organize your results.

Best Practices
--------------

File Management
~~~~~~~~~~~~~~~

1. **Backup Important Files**: Always keep copies of important files before processing
2. **Organize Files**: Use clear, descriptive filenames for easy identification
3. **Monitor Processing**: Check the output directory regularly for new results
4. **Download Promptly**: Retrieve output files before the 24-hour expiration

Dye File Management
~~~~~~~~~~~~~~~~~~~

1. **Test Signatures**: Test new dye files with sample data before production use
2. **Version Control**: Keep versions of your dye files for rollback if needed
3. **Document Signatures**: Maintain documentation of what each dye file does
4. **Regular Review**: Periodically review active signatures and remove outdated ones

Monitoring and Troubleshooting
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

1. **Check File Permissions**: Ensure you have read/write access to the directories
2. **Monitor Disk Space**: Be aware that large files will consume system resources
3. **Verify File Formats**: While all formats are accepted, ensure your files aren't corrupted
4. **Contact Support**: If files aren't processing, contact your system administrator

Timing and Automation
~~~~~~~~~~~~~~~~~~~~~

- **Automatic Processing**: Files are processed every 5 minutes automatically
- **Manual Processing**: Use `./rift input-add` and `./rift dye-add` for immediate processing
- **File Expiration**: Remember the 24-hour retention policy for both processed inputs and outputs
- **Batch Processing**: You can place multiple files at once for efficient processing

Security Considerations
-----------------------

1. **File Content**: Only upload files you're authorized to process
2. **Sensitive Data**: Be aware that files will be processed by the system
3. **Access Control**: Ensure only authorized users can access the processing directories
4. **Data Retention**: Remember that files are automatically deleted after processing

Getting Help
------------

If you encounter issues:

1. **Check File Permissions**: Ensure you can read/write to the required directories
2. **Verify File Formats**: Confirm your files aren't corrupted
3. **Monitor Logs**: System administrators can check processing logs for errors
4. **Contact Support**: Reach out to your system administrator for assistance

For immediate help with commands:

.. code-block:: bash

   # Get help for input processing
   ./rift input-add --help

   # Get help for dye management
   ./rift dye-add --help
   ./rift dye-remove --help

Summary
-------

The Rift system provides a simple, automated way to process your files:

- **Input Files**: Place in ``/var/abyss/input`` → Results appear in ``/var/abyss/output``
- **Dye Files**: Place in ``/var/abyss/dye`` → Signatures become active system-wide
- **Output Files**: Download from ``/var/abyss/output`` → Remember 24-hour expiration

The system handles the complex processing automatically, so you can focus on your work while it handles the technical details safely and efficiently.
